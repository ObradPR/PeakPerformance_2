<div class="d-flex justify-content-between align-items-center position-relative">
    <h2 
        [class.clickable]="isFromMainWorkoutsScren()" 
        [routerLink]="isFromMainWorkoutsScren() ? ['/workouts', workout()!.id] : null"
    >
        {{ isFromMainWorkoutsScren() ? (workout()!.logDate | date:'dd MMMM yyyy') + ' - ' : '' }}
        {{ workout()!.name }}
        @if (workout()?.isCompleted) {
            <i class="fa-solid fa-circle-check" style="font-size: 1.5rem;"></i>
        }
    </h2>
    @if (editable()) {
        <span class="edit-dots edit-dots-workout" (click)="onOpenEditMenu()">â‹®</span>
        @if (selectedWorkoutMenu) {
            <div class="edit-menu" appClickOutside (clickOutside)="this.selectedWorkoutMenu = false">
                <ul>
                    <li (click)="editWorkout()">
                        <i class="fa-solid fa-pen-to-square"></i>
                        Edit
                    </li>
                    <hr>
                    <li (click)="deleteWorkout()" class="delete-item">
                        <i class="fa-solid fa-trash"></i>
                        Delete Workout
                    </li>
                </ul>
            </div>
        }
    }
</div>
@if (workoutTime) {
    <p class="fs-4" style="margin-top: -10px;">{{ workoutTime }}</p>
}
@if (workout()!.notes) {
    <div>
        <textarea class="form-control mb-4" name="workout-notes" id="workout-notes" readonly rows="1" (focus)="editWorkout()">{{ workout()!.notes }}</textarea>
    </div>
}
<div class="d-flex mb-3">
    @if (workout()!.durationTime) {
        <div class="short-info-block">
            <span class="block-item">Time</span>
            <span class="block-item">{{ workout()!.durationTime | duration }}</span>
        </div>
    }
    @if (workout()!.bodyweight) {
        <div class="short-info-block">
            <span class="block-item">Bodyweight</span>
            <span class="block-item">{{ workout()!.bodyweight | measurementConverter:workout()!.bodyweightUnitId }}</span>
        </div>
    }
    @if (workout()!.total) {
        @if (workout()!.total.sets) {
            <div class="short-info-block">
                <span class="block-item">Sets</span>
                <span class="block-item">{{ workout()!.total.sets }}</span>
            </div>
        }
        @if (workout()!.total.reps) {
            <div class="short-info-block">
                <span class="block-item">Reps</span>
                <span class="block-item">{{ workout()!.total.reps }}</span>
            </div>
        }
        @if (workout()!.total.volume) {
            <div class="short-info-block">
                <span class="block-item">Volume</span>
                <span class="block-item">{{ workout()!.total.volume }} {{ userWeightPreference }}</span>
            </div>
        }
        @if (workout()!.total.cardioTime) {
            <div class="short-info-block">
                <span class="block-item">Cardio</span>
                <span class="block-item">{{ workout()!.total.cardioTime }} min</span>
            </div>
        }
    }
</div>

<app-exercises-template 
    [exercises]="workout()?.exercises ?? []"
    [editable]="editable()"
    [workoutId]="workout()!.id"
>
</app-exercises-template>

@if (editable()) {
    <div class="row">
            <div class="mt-5 mb-3">
                <button class="btn btn-primary" (click)="modalService.showExerciseModal(workout()!.id, workout()!.exercises.length + 1)"><i class="fa-solid fa-dumbbell"></i> Add Exercise</button>
        </div>
    </div>
}