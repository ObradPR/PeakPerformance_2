<div class="my-backdrop"></div>
<section class="my-modal sm">
    <div class="my-modal-header">
        <h3>Select Exercise</h3>
        <i class="fa-solid fa-circle-xmark" (click)="closeModal()"></i>
    </div>

    <div class="position-relative">
        <div class="my-modal-body">
            <form [formGroup]="form">
                <div class="filter-block">
                    <div class="input-group">
                        <span class="input-group-text" id="search-addon"><i class="fa-solid fa-magnifying-glass"></i></span>
                        <input type="search" class="form-control" id="search" placeholder="Search exercises..." aria-label="Search" aria-describedby="search-addon" formControlName="search" />
                    </div>
                </div>

                <!-- Exercise list -->
                <div class="d-flex flex-column mb-1">
                    @for (exercise of apiData.data; track $index) {
                        <div class="exercise-item d-flex" (click)="selectExercise(exercise)">
                            <img class="exercise-gif" [src]="exercise.gifUrl" [alt]="exercise.name"/>

                            <div class="flex-grow-1 d-flex flex-column justify-content-center">
                                <div class="exercise-title">
                                    {{ exercise.name | titlecase }}
                                </div>

                                <small class="exercise-muscles mt-1">
                                    <span class="exercise-target-muscles">Target Muscles:</span>
                                    {{ (exercise.targetMuscles.concat(exercise.secondaryMuscles)).join(', ') | titlecase }}
                                </small>
                            </div>

                        </div>
                    }
                    <div class="d-flex justify-content-center">
                        <p-paginator (onPageChange)="onPageChange($event)" 
                            [first]="apiOffset" 
                            [rows]="apiLimit" 
                            [totalRecords]="apiData.metadata.totalPages"
                            [showFirstLastIcon]="false" />
                    </div>
                 </div>
            </form>
        </div>
    </div>

    <div class="my-modal-footer">
        <button class="btn btn-secondary" (click)="closeModal()">Close</button>
    </div>
</section>